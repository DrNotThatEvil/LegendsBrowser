<html>
<head>
<title>$title</title>
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"
	integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap-theme.min.css"
	integrity="sha384-fLW2N01lMqjakBkx3l/M9EahuwpSfeNvV63J5ezn3uZzapT0u7EYsXMjQV+0En5r"
	crossorigin="anonymous">
<link rel="stylesheet"
	href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
<link rel="stylesheet"
	href="/resources/lib/Control.MiniMap.min.css" />

		<script
			src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
		<script
			src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"
			integrity="sha384-0mSbJDEHialfmuBBQP6A4Qrprq5OVfW37PRR3j5ELqxss1yVqOtnepnHVP9aJ7xS"
			crossorigin="anonymous"></script>
		<script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
		<script src="/resources/lib/Control.MiniMap.min.js"></script>
		
		
<style>
.historical-figure {
	color: #3366CC;
}

.entity {
	color: #CC33FF;
}

.site {
	color: #FFCC00;
}

.region {
	color: #009933;
}

.artifact {
	color: #993300;
}

.war {
	color: #600000;
}

.battle {
	color: #900000;
}
</style>
</head>

<body>
	<header class="navbar navbar-static-top" id="top" role="banner">
		<div class="container">
			<nav id="bs-navbar" class="collapse navbar-collapse">
				<ul class="nav navbar-nav">
					<li><a href="/entities">Entities</a></li>
					<li><a href="/region">Regions</a></li>
					<li><a href="/sites">Sites</a></li>
					<li><a href="/hfs">Figures</a></li>
					<li><a href="/years">Years</a></li>
				</ul>
				<form action="/search" class="navbar-form navbar-right">
					<div class="input-group">
						<input type="Search" placeholder="Search..." class="form-control"
							name="query" />
						<div class="input-group-btn">
							<button class="btn btn-default">
								<span class="glyphicon glyphicon-search"></span>
							</button>
						</div>
					</div>
				</form>
			</nav>
		</div>
	</header>


	<div class="container">
		$body_content

		<script>
			var map = L.map('map', {
				maxZoom : 6,
				minZoom : 0,
				crs : L.CRS.Simple
			}); //.setView([ $World.getMapTileWidth() / 2, $World.getMapTileHeight() / 2 ], 1);
			

			var bounds = new L.LatLngBounds([ 0, 0 ], [ $World.getMapTileWidth(), $World.getMapTileHeight() ]);
			map.setMaxBounds(bounds);
			map.fitBounds(bounds);

			var imageUrl = '/map'
			var imageBounds = [ [ 0, 0 ], [ $World.getMapTileWidth(), $World.getMapTileHeight() ] ];

			L.imageOverlay(imageUrl, imageBounds).addTo(map);

			//var miniMap = new L.Control.MiniMap(L.imageOverlay(imageUrl, imageBounds), {zoomLevelFixed: 0}).addTo(map);
			
			function addSite(name, y, x, color) {
				x = $World.getMapTileHeight() - x - 1;
				var polygon = L.polygon(
						[ [ x, y ], [ x, y + 1 ], [ x + 1, y + 1 ],
								[ x + 1, y ] ], {
							color: color,
							weight: 3
						}).addTo(map);
				
				polygon.bindPopup(name);
				
				minx = Math.min(x,minx);
				miny = Math.min(y,miny);
				maxx = Math.max(x,maxx);
				maxy = Math.max(y,maxy);
			}
			
			var minx = 1000, miny = 1000, maxx = 0, maxy = 0;
			
			function zoomTo(y, x, zoom) {
				x = $World.getMapTileHeight() - x - 1;
				map.setView([ x, y ], zoom);
			}
			
			function zoom() {
				console.log(minx, miny, maxx, maxy);
				var sw = L.latLng(minx, miny),
			    ne = L.latLng(maxx, maxy);
				var bounds = new L.LatLngBounds(sw, ne );
				console.log(sw, ne, bounds);
				map.fitBounds(bounds);
			}
		</script>
	</div>
</body>
</html>